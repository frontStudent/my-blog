"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([[6442],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>m});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=r.createContext({}),i=function(e){var t=r.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):u(u({},t),e)),n},s=function(e){var t=i(e.components);return r.createElement(p.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},f=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,p=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),c=i(n),f=a,m=c["".concat(p,".").concat(f)]||c[f]||d[f]||o;return n?r.createElement(m,u(u({ref:t},s),{},{components:n})):r.createElement(m,u({ref:t},s))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,u=new Array(o);u[0]=f;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[c]="string"==typeof e?e:a,u[1]=l;for(var i=2;i<o;i++)u[i]=n[i];return r.createElement.apply(null,u)}return r.createElement.apply(null,n)}f.displayName="MDXCreateElement"},5996:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>u,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>i});var r=n(7462),a=(n(7294),n(3905));const o={},u=void 0,l={unversionedId:"repo/\u573a\u666f\u5b9e\u8df5/\u5e7f\u4e49\u753b\u677f\u7814\u7a76/GPGPU",id:"repo/\u573a\u666f\u5b9e\u8df5/\u5e7f\u4e49\u753b\u677f\u7814\u7a76/GPGPU",title:"GPGPU",description:"WebGPU\u8ba1\u7b97\u52a0\u901f",source:"@site/docs/repo/\u573a\u666f\u5b9e\u8df5/\u5e7f\u4e49\u753b\u677f\u7814\u7a76/GPGPU.md",sourceDirName:"repo/\u573a\u666f\u5b9e\u8df5/\u5e7f\u4e49\u753b\u677f\u7814\u7a76",slug:"/repo/\u573a\u666f\u5b9e\u8df5/\u5e7f\u4e49\u753b\u677f\u7814\u7a76/GPGPU",permalink:"/my-blog/docs/repo/\u573a\u666f\u5b9e\u8df5/\u5e7f\u4e49\u753b\u677f\u7814\u7a76/GPGPU",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/repo/\u573a\u666f\u5b9e\u8df5/\u5e7f\u4e49\u753b\u677f\u7814\u7a76/GPGPU.md",tags:[],version:"current",frontMatter:{},sidebar:"frontendSidebar",previous:{title:"\u5de5\u4f5c\u90e8\u5206bug\u8bb0\u5f55",permalink:"/my-blog/docs/repo/\u573a\u666f\u5b9e\u8df5/\u5de5\u4f5c\u90e8\u5206bug\u8bb0\u5f55"},next:{title:"React\u62d6\u62fd\u5b9e\u8df5\uff1aDnd + Sortable + Resizable",permalink:"/my-blog/docs/repo/\u573a\u666f\u5b9e\u8df5/\u5e7f\u4e49\u753b\u677f\u7814\u7a76/React\u62d6\u62fd\u5b9e\u8df5\uff1aDnd + Sortable + Resizable"}},p={},i=[{value:"WebGPU\u8ba1\u7b97\u52a0\u901f",id:"webgpu\u8ba1\u7b97\u52a0\u901f",level:2},{value:"\u5f15\u5165",id:"\u5f15\u5165",level:3},{value:"Hello World",id:"hello-world",level:3},{value:"\u4f7f\u7528js\u7f16\u5199\u8ba1\u7b97\u4efb\u52a1",id:"\u4f7f\u7528js\u7f16\u5199\u8ba1\u7b97\u4efb\u52a1",level:3},{value:"\u77e9\u9635\u4e58\u6cd5\u5982\u4f55\u5e76\u884c\u8ba1\u7b97",id:"\u77e9\u9635\u4e58\u6cd5\u5982\u4f55\u5e76\u884c\u8ba1\u7b97",level:3},{value:"\u5b9e\u9645\u5e94\u7528\u573a\u666f",id:"\u5b9e\u9645\u5e94\u7528\u573a\u666f",level:3},{value:"\u53c2\u8003\u8d44\u6599",id:"\u53c2\u8003\u8d44\u6599",level:3}],s={toc:i},c="wrapper";function d(e){let{components:t,...n}=e;return(0,a.kt)(c,(0,r.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"webgpu\u8ba1\u7b97\u52a0\u901f"},"WebGPU\u8ba1\u7b97\u52a0\u901f"),(0,a.kt)("h3",{id:"\u5f15\u5165"},"\u5f15\u5165"),(0,a.kt)("p",null,"WebGPU\u76ee\u524d\u80fd\u591f\u5904\u7406\u4e24\u79cd\u7c7b\u578b\u7684\u7ba1\u7ebf"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u6e32\u67d3\u7ba1\u7ebf\uff1a\u7528\u4e8e\u6e32\u67d3\u56fe\u5f62\uff0c\u901a\u5e38\u6e32\u67d3\u5230canvas\u5143\u7d20\u4e2d\uff0c\u4e3b\u8981\u5206\u4e3a\u9876\u70b9\u7740\u8272\u9636\u6bb5\u548c\u7247\u5143\u7740\u8272\u9636\u6bb5"),(0,a.kt)("li",{parentName:"ol"},"\u8ba1\u7b97\u7ba1\u7ebf\uff1a\u7528\u4e8e\u901a\u7528\u8ba1\u7b97\u3002\u8ba1\u7b97\u7ba1\u7ebf\u5305\u542b\u5355\u72ec\u7684\u8ba1\u7b97\u9636\u6bb5\uff0c\u5728\u8be5\u9636\u6bb5\u4e2d\uff0c\u8ba1\u7b97\u7740\u8272\u5668\uff08compute shader\uff09\u63a5\u53d7\u901a\u7528\u7684\u6570\u636e\uff0c\u5728\u6307\u5b9a\u6570\u91cf\u7684\u5de5\u4f5c\u7ec4\u4e4b\u95f4\u5e76\u884c\u5904\u7406\u6570\u636e\uff0c\u7136\u540e\u5c06\u7ed3\u679c\u8fd4\u56de\u5230\u7f13\u51b2\u533a\nGPGPU\uff08General-purpose computing on graphics processing units\uff09\u53ef\u4ee5\u7406\u89e3\u4e3a\u5229\u7528GPU\u7684\u5e76\u884c\u8ba1\u7b97\u80fd\u529b\u53bb\u5904\u7406\u8ba1\u7b97\u5bc6\u96c6\u578b\u7684\u4efb\u52a1")),(0,a.kt)("h3",{id:"hello-world"},"Hello World"),(0,a.kt)("p",null,"\u6211\u4eec\u4f7f\u7528WebGPU API\u914d\u5408WGSL\uff08WebGPU\u7684\u7740\u8272\u5668\u8bed\u8a00\uff09\u53bb\u5b9e\u73b0\u4e00\u4e2a\u6700\u7b80\u5355\u7684GPGPU\u793a\u4f8b\uff0c\u793a\u4f8b\u4e2d\u4f1a\u5bf9\u4e00\u4e2a\u4e00\u7ef4\u6570\u7ec4\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\u8fdb\u884c\u64cd\u4f5c\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u662f\u5e76\u884c\u7684"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'  async function main() {\n  const adapter = await navigator.gpu?.requestAdapter();\n  const device = await adapter?.requestDevice();\n  if (!device) {\n    alert("need a browser that supports WebGPU");\n    return;\n  }\n\n  const module = device.createShaderModule({\n    label: "doubling compute module",\n    code: `\n      @group(0) @binding(0) var<storage, read_write> data: array<f32>;\n\n      @compute @workgroup_size(1) fn computeSomething(\n        @builtin(global_invocation_id) id: vec3u\n      ) {\n        let i = id.x;\n        data[i] = data[i] * 2.0;\n      }\n    `,\n  });\n\n  const pipeline = device.createComputePipeline({\n    label: "doubling compute pipeline",\n    layout: "auto",\n    compute: {\n      module,\n    },\n  });\n\n  const input = new Float32Array([1, 3, 5]);\n\n  // create a buffer on the GPU to hold our computation\n  // input and output\n  const workBuffer = device.createBuffer({\n    label: "work buffer",\n    size: input.byteLength,\n    usage:\n      GPUBufferUsage.STORAGE |\n      GPUBufferUsage.COPY_SRC |\n      GPUBufferUsage.COPY_DST,\n  });\n\n  // Copy our input data to that buffer\n  device.queue.writeBuffer(workBuffer, 0, input);\n\n  // create a buffer on the GPU to get a copy of the results\n  const resultBuffer = device.createBuffer({\n    label: "result buffer",\n    size: input.byteLength,\n    usage: GPUBufferUsage.MAP_READ | GPUBufferUsage.COPY_DST,\n  });\n\n  // Setup a bindGroup to tell the shader which\n  // buffer to use for the computation\n  const bindGroup = device.createBindGroup({\n    label: "bindGroup for work buffer",\n    layout: pipeline.getBindGroupLayout(0),\n    entries: [{ binding: 0, resource: { buffer: workBuffer } }],\n  });\n\n  // Encode commands to do the computation\n  const encoder = device.createCommandEncoder({\n    label: "doubling encoder",\n  });\n  const pass = encoder.beginComputePass({\n    label: "doubling compute pass",\n  });\n  pass.setPipeline(pipeline);\n  pass.setBindGroup(0, bindGroup);\n  pass.dispatchWorkgroups(input.length);\n  pass.end();\n\n  // Encode a command to copy the results to a mappable buffer.\n  encoder.copyBufferToBuffer(workBuffer, 0, resultBuffer, 0, resultBuffer.size);\n\n  // Finish encoding and submit the commands\n  const commandBuffer = encoder.finish();\n  device.queue.submit([commandBuffer]);\n\n  // Read the results\n  await resultBuffer.mapAsync(GPUMapMode.READ);\n  const result = new Float32Array(resultBuffer.getMappedRange().slice());\n  resultBuffer.unmap();\n\n  console.log("input", input);\n  console.log("result", result);\n}\nmain();\n')),(0,a.kt)("h3",{id:"\u4f7f\u7528js\u7f16\u5199\u8ba1\u7b97\u4efb\u52a1"},"\u4f7f\u7528js\u7f16\u5199\u8ba1\u7b97\u4efb\u52a1"),(0,a.kt)("p",null,"\u4f7f\u7528WGSL\u8bed\u8a00\u6700\u76f4\u63a5\uff0c\u4f46\u5bf9\u4e8e\u524d\u7aef\u5f00\u53d1\u8005\u6765\u8bf4\u6709\u989d\u5916\u5fc3\u667a\u8d1f\u62c5\uff0c\u53e6\u5916\u5728\u5b57\u7b26\u4e32\u91cc\u5199\u4ee3\u7801\u4f1a\u4e27\u5931\u8bed\u6cd5\u9ad8\u4eae\u3002\ngpu.js\u652f\u6301\u5c06js\u7684\u4e00\u4e2a\u5b50\u96c6\uff08\u5e76\u4e0d\u652f\u6301\u5168\u90e8js\u8bed\u6cd5\uff09\u7f16\u8bd1\u4e3aWGSL\uff0c\u56e0\u6b64\u524d\u7aef\u5f00\u53d1\u8005\u53ef\u4ee5\u4f7f\u7528js\u6765\u7f16\u5199\u8ba1\u7b97\u4efb\u52a1\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'function gpuHandleVector() {\n    const gpu = new GPU.GPU();\n    const vectorHandler = gpu\n        .createKernel(function (data) {\n          let i = this.thread.x;\n            return data[i] * 2;\n        })\n        .setOutput([3]);\n\n    let data = [1,2,3];\n    const result = vectorHandler(data);\n    console.log(result, "result");\n}\n')),(0,a.kt)("p",null,"\u9644\uff1agpu.js\u8e29\u5751 ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/gpujs/gpu.js/issues/490"},"https://github.com/gpujs/gpu.js/issues/490")),(0,a.kt)("h3",{id:"\u77e9\u9635\u4e58\u6cd5\u5982\u4f55\u5e76\u884c\u8ba1\u7b97"},"\u77e9\u9635\u4e58\u6cd5\u5982\u4f55\u5e76\u884c\u8ba1\u7b97"),(0,a.kt)("p",null,"\u4e24\u4e2a\u77e9\u9635\u76f8\u4e58\u7684\u5b9e\u73b0\u662f\u4e00\u4e2a\u4e09\u91cd\u5faa\u73af\uff0c\u5bf9\u4e8e\u7ed3\u679c\u77e9\u9635\u7684\u6bcf\u4e2a\u5143\u7d20\uff0c\u90fd\u9700\u8981\u904d\u5386\u4e24\u4e2a\u77e9\u9635\u5bf9\u5e94\u884c\u548c\u5217\u7684\u6240\u6709\u5143\u7d20\uff0c\u7136\u540e\u5c06\u5b83\u4eec\u76f8\u4e58\u5e76\u7d2f\u52a0\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function cpuMultiplyMatrix(a, b, matrixSize) {\n  let productRow = Array.apply(null, new Array(matrixSize)).map(\n    Number.prototype.valueOf,\n    0\n  );\n  let product = new Array(matrixSize);\n  for (let p = 0; p < matrixSize; p++) {\n    product[p] = productRow.slice();\n  }\n\n  for (let i = 0; i < matrixSize; i++) {\n    for (let j = 0; j < matrixSize; j++) {\n      for (let k = 0; k < matrixSize; k++) {\n        product[i][j] += a[i][k] * b[k][j];\n      }\n    }\n  }\n}\n")),(0,a.kt)("p",null,"\u4f46\u5b9e\u9645\u4e0a\u7ed3\u679c\u77e9\u9635\u4e2d\u6bcf\u4e2a\u5143\u7d20\u7684\u7ed3\u679c\u5f7c\u6b64\u4e4b\u95f4\u6ca1\u6709\u4f9d\u8d56\u5173\u7cfb\uff0c\u53ef\u8fdb\u884c\u5e76\u884c\u8ba1\u7b97"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function gpuMultiplyMatrix(a,b,matrixSize) {\n  const gpu = new GPU.GPU();\n  const multiplyMatrix = gpu\n    .createKernel(function (a, b, matrixSize) {\n      let sum = 0;\n      for (let i = 0; i < matrixSize; i++) {\n        sum += a[this.thread.y][i] * b[i][this.thread.x];\n      }\n      return sum;\n    })\n    .setOutput([matrixSize, matrixSize]);\n  const resultMatrix = multiplyMatrix(a, b, matrixSize);\n}\n")),(0,a.kt)("h3",{id:"\u5b9e\u9645\u5e94\u7528\u573a\u666f"},"\u5b9e\u9645\u5e94\u7528\u573a\u666f"),(0,a.kt)("p",null,"\u53ef\u89c6\u5316\u573a\u666f\u4e2d\u5b58\u5728\u5f88\u591a\u9002\u5408GPU\u6267\u884c\u7684\u53ef\u5e76\u884c\u8ba1\u7b97\u4efb\u52a1\uff0c\u4f8b\u5982\u5e03\u5c40\u8ba1\u7b97"),(0,a.kt)("p",null,"G6\u4e2d\u7684Fruchterman\u5e03\u5c40\u7b97\u6cd5\u662f\u4e00\u4e2a\u5f88\u5178\u578b\u7684\u4f8b\u5b50\uff0c\u5728\u6bcf\u6b21\u8fed\u4ee3\u4e2d\u6bcf\u4e2a\u8282\u70b9\u7684\u4f4d\u7f6e\u90fd\u9700\u8981\u6839\u636e\u5176\u4ed6\u8282\u70b9\u4f4d\u7f6e\u8fdb\u884c\u8ba1\u7b97\uff0c\u5e76\u4e14\u9700\u8981\u7ecf\u5386\u5f88\u591a\u6b21\u8fed\u4ee3\u624d\u80fd\u8fbe\u5230\u7a33\u5b9a\u72b6\u6001\uff0c\u56e0\u6b64\u8ba1\u7b97\u91cf\u5f88\u5927\u3002\n",(0,a.kt)("a",{parentName:"p",href:"https://g.antv.antgroup.com/zh/examples/gpgpu/graph-analysis-algorithm/#fruchterman"},"https://g.antv.antgroup.com/zh/examples/gpgpu/graph-analysis-algorithm/#fruchterman")),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://juejin.cn/post/7013538544647929893?searchId=20240621094249CB4CAFAE790A435E9BB8"},"https://juejin.cn/post/7013538544647929893?searchId=20240621094249CB4CAFAE790A435E9BB8")),(0,a.kt)("h3",{id:"\u53c2\u8003\u8d44\u6599"},"\u53c2\u8003\u8d44\u6599"),(0,a.kt)("p",null,"WebGPU\u4ecb\u7ecd\uff1a",(0,a.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Web/API/WebGPU_API"},"https://developer.mozilla.org/zh-CN/docs/Web/API/WebGPU_API"),"\nWebGPU\u57fa\u7840\u6559\u7a0b\uff1a",(0,a.kt)("a",{parentName:"p",href:"https://webgpufundamentals.org/webgpu/lessons/zh_cn/webgpu-fundamentals.html"},"https://webgpufundamentals.org/webgpu/lessons/zh_cn/webgpu-fundamentals.html"),"\nantv/g\u5b98\u7f51\u5173\u4e8eGPGPU\u4ecb\u7ecd\uff1a",(0,a.kt)("a",{parentName:"p",href:"https://g.antv.antgroup.com/api/gpgpu/intro"},"https://g.antv.antgroup.com/api/gpgpu/intro"),"\nGPU.js\u5b98\u7f51\uff1a",(0,a.kt)("a",{parentName:"p",href:"https://gpu.rocks/"},"https://gpu.rocks/")))}d.isMDXComponent=!0}}]);